<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- For Mobile Devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8">
  <meta name="generator" content="Doxygen 1.8.13">
  <title>SPDK: Configuring SPDK Applications</title>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,900" type="text/css">
  <link href="../css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="tabs.css" type="text/css">
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div class="container-fluid">
  <div id="top">  <!-- do not remove this div, it is closed by doxygen! -->
    <div class="row no-gutters">
      <div class="col-sm-12">
        <section id="nav">
          <div class="navbar navbar-default navbar-static-top banner-tabs">
            <ul class="nav navbar-nav">
              <li role="presentation">
                <a href="http://www.spdk.io/">
                  <i class="glyphicon glyphicon-home"></i>
                  <span class="box-name">home</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/releases/">
                  <i class="glyphicon glyphicon-download-alt"></i>
                  <span class="box-name">download</span>
                </a>
              </li>
              <li class="active" role="presentation">
                <a href="index.html">
                  <i class="glyphicon glyphicon-book"></i>
                  <span class="box-name">documentation</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/development/">
                  <i class="glyphicon glyphicon-wrench"></i>
                  <span class="box-name">development</span>
                </a>
              </li>
              <li role="presentation">
                <a href="https://ci.spdk.io/">
                  <i class="glyphicon glyphicon-ok"></i>
                  <span class="box-name">CI status</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/community/">
                  <i class="glyphicon glyphicon-envelope"></i>
                  <span class="box-name">community</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/blog/">
                  <i class="glyphicon glyphicon-comment"></i>
                  <span class="box-name">Blog</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/roadmap/">
                  <i class="glyphicon glyphicon-map-marker"></i>
                  <span class="box-name">Roadmap</span>
                </a>
              </li>
              <li role="presentation">
                <a href="http://www.spdk.io/news/">
                  <i class="glyphicon glyphicon-bullhorn"></i>
                  <span class="box-name">News</span>
                </a>
              </li>
            </ul>
          </div>
        </section>
      </div>
    </div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('user_guides_common.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Configuring SPDK Applications </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="user_guides_common_overview"></a>
Overview</h1>
<p>This guide covers topics common to all applications that leverage SPDK's application framework.</p>
<h2><a class="anchor" id="common_cmd_line_args"></a>
Command Line Parameters</h2>
<p>The SPDK application framework defines a set of base command line flags for all applications that use it. Specific applications may implement additional flags.</p>
<table class="doxtable">
<tr>
<th>Param </th><th>Type </th><th>Default </th><th>Description  </th></tr>
<tr>
<td>-c </td><td>string </td><td></td><td><a class="el" href="user_guides_common.html#cmd_arg_config_file">Configuration file</a> </td></tr>
<tr>
<td>-d </td><td>flag </td><td>false </td><td>disable coredump file creation </td></tr>
<tr>
<td>-e </td><td>integer </td><td>0x0 </td><td>tracepoint group hexadecimal mask for SPDK trace buffers </td></tr>
<tr>
<td>-g </td><td>flag </td><td>false </td><td>force creating just one hugetlbfs file </td></tr>
<tr>
<td>-h </td><td>flag </td><td>false </td><td>show all available parameters and exit </td></tr>
<tr>
<td>-i </td><td>integer </td><td>process PID </td><td>shared memory ID </td></tr>
<tr>
<td>-m </td><td>CPU mask </td><td>0x1 </td><td>application <a class="el" href="user_guides_common.html#cpu_mask">CPU mask</a> </td></tr>
<tr>
<td>-n </td><td>integer </td><td>all channels </td><td>number of memory channels used for DPDK </td></tr>
<tr>
<td>-p </td><td>integer </td><td>first core in CPU mask </td><td>master (primary) core for DPDK </td></tr>
<tr>
<td>-q </td><td>flag </td><td>false </td><td>disable notice level logging to <code>stderr</code> </td></tr>
<tr>
<td>-r </td><td>string </td><td>/var/tmp/spdk.sock </td><td>RPC listen address </td></tr>
<tr>
<td>-s </td><td>integer </td><td>all hugepage memory </td><td>memory size in MB for DPDK </td></tr>
<tr>
<td>-u </td><td>flag </td><td>false </td><td><a class="el" href="user_guides_common.html#cmd_arg_disable_pci_access">Disable PCI access</a>. </td></tr>
<tr>
<td>-w </td><td>flag </td><td>false </td><td><a class="el" href="user_guides_common.html#cmd_arg_deferred_initialization">Deferred initialization</a> </td></tr>
<tr>
<td>-B </td><td>B:D:F </td><td></td><td><a class="el" href="user_guides_common.html#cmd_arg_pci_blacklist_whitelist">PCI address blacklist and whitelist</a>. </td></tr>
<tr>
<td>-W </td><td>B:D:F </td><td></td><td><a class="el" href="user_guides_common.html#cmd_arg_pci_blacklist_whitelist">PCI address blacklist and whitelist</a>. </td></tr>
<tr>
<td>-L </td><td>string </td><td></td><td><a class="el" href="user_guides_common.html#cmd_arg_debug_log_flags">Debug log flags</a> </td></tr>
<tr>
<td>-f </td><td>string </td><td></td><td>save pid to file under given path </td></tr>
</table>
<h3><a class="anchor" id="cmd_arg_config_file"></a>
Configuration file</h3>
<p>Historically, the SPDK application framework was configured using a configuration file. This is still supported, but is considered deprecated in favor of JSON RPC configuration. See <a class="el" href="jsonrpc.html">JSON-RPC Methods</a> for details.</p>
<p>Note that <code>-c</code> and <code>-w</code> cannot be used at the same time.</p>
<h3><a class="anchor" id="cmd_arg_deferred_initialization"></a>
Deferred initialization</h3>
<p>SPDK applications progress through a set of states, including <code>STARTUP</code> and <code>RUNTIME</code>.</p>
<p>If <code>-w</code> parameter is provided SPDK will pause just before starting subsystem initialization. This state is called <code>STARTUP</code>. The JSON RPC server is ready but list of commands is limited to only those that are needed to set application global parameters. Those parameters can't be changed after SPDK application enters <code>RUNTIME</code> state. When client finishes preconfiguring SPDK subsystems it needs to issue <a class="el" href="jsonrpc.html#rpc_start_subsystem_init">start_subsystem_init</a> RPC command to continue initialization process. After <code>rpc_start_subsystem_init</code> returns <code>true</code> the SPDK will enter <code>RUNTIME</code> state and list of available commands will change again. From now on SPDK is ready for further configuration.</p>
<p>To know what RPC methods are valid in current state issue <code>get_rpc_methods</code> with parameter <code>current</code> set to <code>true</code>.</p>
<p>For more details see <a class="el" href="jsonrpc.html">JSON-RPC Methods</a> documentation.</p>
<h3><a class="anchor" id="cmd_arg_disable_pci_access"></a>
Disable PCI access</h3>
<p>If SPDK is run with PCI access disabled it won't detect any PCI devices, including NVMe, IOAT, NICs etc. Also VFIO and UIO kernel modules are not needed anymore.</p>
<h3><a class="anchor" id="cmd_arg_pci_blacklist_whitelist"></a>
PCI address blacklist and whitelist</h3>
<p>Note that <code>-B</code> and <code>-W</code> cannot be used at the same time.</p>
<p>If blacklist is used all devices with provided PCI address will be ignored. If whitelist is used only those devices will be probed. You can used <code>-B</code> or <code>-W</code> more than once to add more than one device to list.</p>
<h3><a class="anchor" id="cmd_arg_debug_log_flags"></a>
Debug log flags</h3>
<p>Use comma separated list of flags or use <code>-L all</code> to enable all debug flags. Run SPDK application with <code>-h</code> to get a list of all valid flags. Debug flags are only available in debug builds of SPDK.</p>
<h2><a class="anchor" id="cpu_mask"></a>
CPU mask</h2>
<p>Whenever the <code>CPU mask</code> is mentioned it is a string in one of the following formats:</p>
<ul>
<li>Case insensitive hexadecimal string with or without "0x" prefix.</li>
<li>Comma separated list of CPUs or list of CPU ranges. Use '-' to define range.</li>
</ul>
<h3>Example</h3>
<p>The following CPU masks are equal and correspond to CPUs 0, 1, 2, 8, 9, 10, 11 and 12:</p>
<div class="fragment"><div class="line">0x1f07</div><div class="line">0x1F07</div><div class="line">1f07</div><div class="line">[0,1,2,8-12]</div><div class="line">[0, 1, 2, 8, 9, 10, 11, 12]</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
</div>
